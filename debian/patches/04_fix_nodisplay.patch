From 0c4692ae5836fffdab4dcd0fc7220f825162746b Mon Sep 17 00:00:00 2001
From: Jasper St. Pierre <jstpierre@mecheye.net>
Date: Tue, 19 Jun 2012 17:02:38 +0000
Subject: appDisplay: Fix recursive directory NoDisplay testing

We were accidentally testing NoDisplay on the wrong directory.

https://bugzilla.gnome.org/show_bug.cgi?id=658176
---
diff --git a/js/ui/appDisplay.js b/js/ui/appDisplay.js
index ad7b70d..b0ff291 100644
--- a/js/ui/appDisplay.js
+++ b/js/ui/appDisplay.js
@@ -208,8 +208,9 @@ const ViewByCategories = new Lang.Class({
                     appList.push(app);
                 }
             } else if (nextType == GMenu.TreeItemType.DIRECTORY) {
-                if (!dir.get_is_nodisplay())
-                    this._loadCategory(iter.get_directory(), appList);
+                var itemDir = iter.get_directory();
+                if (!itemDir.get_is_nodisplay())
+                    this._loadCategory(itemDir, appList);
             }
         }
     },
--
cgit v0.9.0.2
